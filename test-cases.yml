---
- summary: |
    Проверка создания игры без регистрации
  requirement: |
    Пользователь должен иметь возможность провести тестовый батл без регистрации/авторизации
  prerequisites: |
    Пользователь не авторизован
  test-data: |
    empty
  steps:
    - Заходим на главную страницу
    - Нажимаем на кнопку "try simple battle"
  expected-result: |
    Игра без регистрации успешно создана

- summary: |
    Проверка успешной регистрации
  requirement: |
    Пользователь должен иметь возможность авторизации/регистрации на сайте
  prerequisites:
    Открыта страница регистрации
  test-data: |
    empty
  steps:
    - Вводим логин
    - Вводим email
    - Вводим пароль
    - Нажимаем кнопку «Submit»
  expected-result: |
    Пользователь успешно зарегистрирован

- summary: |
    Проверка регистрации с невалидным имейлом
  requirement: |
    Пользователь должен получить сообщение об ошибке при вводе невалидных данных при регистрации
  prerequisites:
    Открыта страница регистрации
  test-data: |
    empty
  steps:
    - Вводим логин
    - Вводим невалидный email, например ivan@ivan.ru
    - Вводим пароль
    - Нажимаем кнопку «Submit»
  expected-result: |
    Регистрация не успешна и поле имейла отображает ошибку

- summary: |
    Проверка успешной авторизации 
  requirement: |
    При верном вводе логине и пароля пользователь должен войти в систему
  prerequisites: |
    Открыта страница логина, пользователь зарегистрирован
  test-data: |
    empty
  steps:
    - Вводим логин
    - Вводим пароль
    - Нажимаем кнопку «Submit»
  expected-result: |
    Пользователь успешно авторизован

- summary: |
    Проверка авторизации незарегистрированного пользователя
  requirement: |
    При неправильном логине или пароле пользователь должен получить сообщение об ошибке
  prerequisites:
    Открыта страница логина
  test-data: |
    Email = jaylode7382372@yandex.ru Пароль = goodpass
  steps:
    - Вводим логин
    - Вводим пароль
    - Нажимаем кнопку «Submit»
  expected-result: |
    Пользователь не авторизован

- summary: |
    Проверка успешной авторизации через github
  requirement: |
    Пользователь должен иметь возможность авторизации через github/discord
  prerequisites:
    Открыта страница логина
    Пользователь имеет аккаунт на гитхабе
  test-data: |
    Empty
  steps:
    - Нажимаем на странице логина "Sign in with github"
    - Подтверждаем вход через аккаунт
  expected-result: |
    Пользователь успешно авторизован 

- summary: |
    Проверка успешной авторизации через discord
  requirement: |
    Пользователь должен иметь возможность авторизации через github/discord
  prerequisites:
    Открыта страница логина
    Пользователь имеет аккаунт в дискорде
  test-data: |
    Empty
  steps:
    - Нажимаем на странице логина "Sign in with discord"
    - Подтверждаем вход через аккаунт
  expected-result: |
    Пользователь успешно авторизован

- summary: |
    Проверка возможности создания игры против бота
  requirement: |
    Пользователь должен иметь возможность создавать игры против ботов
  prerequisites:
    Пользователь авторизован
  test-data: |
    Empty
  steps:
    - На главной странице нажимаем "Create a game"
    - Устанавливаем level - 1
    - Выбираем game type - "With a bot"
    - Устанавливаем Time control - 8 min
    - В поле "Choose task by name or tags" оставляем значение по умолчанию
    - Нажимаем кнопку "Create battle"
  expected-result: |
    У пользователя открывается страница с созданным баттлом

- summary: |
    Проверка возможности приглашения конкретного пользователя в игру
  requirement: |
    Пользователь должен иметь возможность пригласить друга в игру
  prerequisites:
    Пользователи авторизованы
  test-data: |
    Empty
  steps:
    - На главной странице нажимаем "Create a game"
    - Устанавливаем level - 1
    - Выбираем game type - "With a friend"
    - Устанавливаем Time control - 8 min
    - Выбираем оппонента по нику в поле "Choose opponent"
    - В поле "Choose task by name or tags" оставляем значение по умолчанию
    - Нажимаем кнопку "Create invite"
  expected-result: |
    Другому выбранному пользователю приходит инвайт в игру  

- summary: |
    Проверка возможности вступления в открытые игры других пользователей
  requirement: |
    Пользователь должен иметь возможность вступать в открытые игры
  prerequisites:
    Пользователь авторизован
  test-data: |
    Empty
  steps:
    - На главной странице открыть вкладку "lobby"
    - Нажать "Fight" на любой доступной открытой игре
  expected-result: |
    Пользователь присоединился к игре 

- summary: |
    Проверка возможности отправки приватных сообщений
  requirement: |
    Пользователь должен иметь возможность отправлять приватные сообщения
  prerequisites:
    Пользователи авторизованы
  test-data: |
    Empty
  steps:
    - На главной странице открыть вкладку "lobby"
    - Нажать на значок письма "Send message" в блоке с онлайн-пользователями
    - Выбрать из списка любого доступного пользователя
    - Написать любое сообщение в открывшемся приватном канале
    - Нажать "send"
  expected-result: |
    Пользователю отправлено приватное сообщение 

- summary: |
    Проверка ожидания соперника в созданной игре
  requirement: |
    Пользователь должен иметь возможность создавать сам игры и ждать соперника
  prerequisites:
    Пользователи авторизованы
  test-data: |
    Empty
  steps:
    - На главной странице нажимаем "Create a game"
    - Устанавливаем level - 1
    - Выбираем game type - "With other user"
    - Устанавливаем Time control - 8 min
    - В поле "Choose task by name or tags" оставляем значение по умолчанию
    - Нажимаем кнопку "Create battle"
  expected-result: |
    Создается игра в статусе ожидания соперника    

- summary: |
    Проверка возможности создания турнира
  requirement: |
    Пользователь должен иметь возможность создавать турнир
  prerequisites:
    Empty
  test-data: |
    Empty
  steps:
    - На главной странице перейти во вкладку "tournaments"
    - Нажать "You may want to create one"
    - На открывшейся страницы внизу заполнить поле Name = "test tournament"
    - Остальные поля оставить со значениями по умолчанию
    - Нажать "Create"
  expected-result: |
    Турнир успешно создан

- summary: |
    Проверка возможности открытия профиля другого пользователя
  requirement: |
    Пользователь должен иметь возможность открыть профиль любого другого пользователя
  prerequisites:
    Empty
  test-data: |
    Empty
  steps:
    - На главной странице перейти во вкладку "lobby"
    - Нажать на имя любого пользователя
    - Выбрать в выпавшем окне "Info"
  expected-result: |
    Открывается профиль пользователя

- summary: |
    Проверка возможности смены никнейма
  requirement: |
    Пользователь должен иметь возможность смены никнейма
  prerequisites:
    Открыта страница https://codebattle.hexlet.io/settings
  test-data: |
    Empty
  steps:
    - В поле "Your name" меняем ник на "GoSleep"
    - Нажать "Create"
  expected-result: |
    Имя пользователя успешно обновлено

- summary: |
    Проверка возможности просматривать список онлайн-игроков по клику из баннера
  requirement: |
    Пользователь должен иметь возможность просматривать список онлайн-игроков по клику из баннера
  prerequisites:
    Empty
  test-data: |
    Empty
  steps:
    - Кликнуть в баннере на количество игроков онлайн
  expected-result: |
    Открывается список онлайн-игроков

- summary: |
    Проверка просмотра таблицы лидеров с главной страницы по периодам
  requirement: |
    Пользователь должен иметь возможность просматривать таблицу лидеров по периодам
  prerequisites:
    Empty
  test-data: |
    Empty
  steps:
    - В таблице "LEADERBOARD" кликнуть на "Month"
    - В таблице "LEADERBOARD" кликнуть на "All"
  expected-result: |
    Список лидеров в зависимости меняется в зависимости от выбранного периода   

- summary: |
    Проверка удобства мобильной версии
  requirement: |
    Сайт должен иметь мобильную версию
  prerequisites: |
    Empty
  test-data: |
    Отсутствуют
  steps:
    - Открыть DevTools нажав на F12
    - Нажать Ctrl + Shift + M
    - Вверху в "Dimensions" выбрать любое мобильное устройство
  expected-result: |
    Мобильная версия сайта корректно отображается

- summary: |
    Проверка создания двух аккаунтов на одну почту
  requirement: |
    Пользователь не может зарегистрировать несколько аккаунтов на одну почту
  prerequisites: |
    В системе уже есть один созданный аккаунт с почтой jaylode42@yandex.ru
  test-data: |
    Логин = smalltalk67 Пароль = badpassword email = jaylode42@yandex.ru
  steps:
    - Открыть страницу регистрации
    - Ввести тестовые данные
    - Нажать "Submit"
  expected-result: |
    Пользователь получает сообщение об ошибке, что этот email уже используется
